"use strict";(self.webpackChunkalter_buddy=self.webpackChunkalter_buddy||[]).push([[179],{5179:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ae});var l=n(7039),a=n(5043),o=n(4764),r=function(e,t){return"boolean"===typeof t?t:!e};const i=function(e){return(0,a.useReducer)(r,e)};var s=n(8075),c=n(91),u=n(7861),d=n(4109),m=n.n(d),h=n(68),p=n(6883),f=n(8433),E=e=>a.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),a.createElement("g",{clipPath:"url(#ColoredHandIcon_svg__a)"},a.createElement("path",{d:"M5.747 10.359c.004-.004.01-.005.014-.008v-.002l-.014.01Z",fill:"url(#ColoredHandIcon_svg__b)"}),a.createElement("path",{d:"M9.005 8.58c-.953-.954-1.977-.793-2.766-.004L5.106 23.108c0 .137.013.273.02.41l8.152-8.151c-3.411.89-2.409-1.958-3.592-2.694 0 0 1.307-2.105-.68-4.094Z",fill:"url(#ColoredHandIcon_svg__c)"}),a.createElement("path",{d:"M34.57 17.645a1.666 1.666 0 0 0-2.357 0l-4.818 4.818-.535-.643 8.005-8.005a2.083 2.083 0 1 0-2.946-2.946l-7.74 7.738-.535-.643L31.92 9.69a2.083 2.083 0 1 0-2.947-2.946l-8.008 8.008-.536-.643 6.103-6.102c.77-.771.918-2.027.229-2.871a2.083 2.083 0 0 0-3.091-.16L5.126 23.519a6.663 6.663 0 0 0 1.934 4.328l6.297 6.297a5 5 0 0 0 7.071 0L34.57 20.002a1.666 1.666 0 0 0 0-2.357Z",fill:"url(#ColoredHandIcon_svg__d)"}),a.createElement("path",{d:"M24.258 7.333a1.25 1.25 0 1 0 1.768-1.768 1.25 1.25 0 0 0-1.768 1.768ZM29.561 9.1a1.25 1.25 0 1 0 1.768-1.767A1.25 1.25 0 0 0 29.561 9.1ZM32.508 13.226a1.25 1.25 0 1 0 1.767-1.768 1.25 1.25 0 0 0-1.767 1.768ZM32.802 19.413a.833.833 0 1 0 1.179-1.179.833.833 0 0 0-1.179 1.179Z",fill:"#FFF0C9"})),a.createElement("defs",null,a.createElement("linearGradient",{id:"ColoredHandIcon_svg__b",x1:5.742,y1:10.376,x2:5.743,y2:10.377,gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#FFC430"}),a.createElement("stop",{offset:.57,stopColor:"#F8BD29"}),a.createElement("stop",{offset:1,stopColor:"#F0B421"})),a.createElement("linearGradient",{id:"ColoredHandIcon_svg__c",x1:5.602,y1:15.715,x2:14.901,y2:15.78,gradientUnits:"userSpaceOnUse"},a.createElement("stop",{offset:.282,stopColor:"#FFC430"}),a.createElement("stop",{offset:.401,stopColor:"#F8BD2D"}),a.createElement("stop",{offset:.574,stopColor:"#E5AA23"}),a.createElement("stop",{offset:.78,stopColor:"#C58A14"}),a.createElement("stop",{offset:1,stopColor:"#9C6000"})),a.createElement("linearGradient",{id:"ColoredHandIcon_svg__d",x1:20.364,y1:14.599,x2:19.817,y2:43.562,gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#FFC430"}),a.createElement("stop",{offset:.41,stopColor:"#FEC130"}),a.createElement("stop",{offset:.72,stopColor:"#FCB730"}),a.createElement("stop",{offset:.998,stopColor:"#F7A72F"}),a.createElement("stop",{offset:1,stopColor:"#F7A72F"})),a.createElement("clipPath",{id:"ColoredHandIcon_svg__a"},a.createElement("path",{fill:"currentColor",d:"M0 0h40v40H0z"})))),g=n(2578),v=n(3926),w=e=>a.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.792 12.916a.116.116 0 1 1 0 .232.116.116 0 0 1 0-.232Zm1.366.116a1.366 1.366 0 1 0-2.732 0 1.366 1.366 0 0 0 2.732 0ZM3.125 5a.625.625 0 0 0-.625.625v4.444c0 .346.28.625.625.625h4.444a.625.625 0 1 0 0-1.25H3.75V5.625A.625.625 0 0 0 3.125 5Z",fill:"currentColor"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.792 6.99a6.041 6.041 0 0 1 6.042 6.042.625.625 0 1 0 1.25 0 7.291 7.291 0 0 0-7.292-7.291A7.292 7.292 0 0 0 4.93 7.604l-2.223 2a.625.625 0 1 0 .836.93l2.222-2a6.042 6.042 0 0 1 4.027-1.543Z",fill:"currentColor"})),y=e=>a.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.792 12.916a.116.116 0 1 0 0 .232.116.116 0 0 0 0-.232Zm-1.366.116a1.366 1.366 0 1 1 2.731 0 1.366 1.366 0 0 1-2.731 0ZM16.458 5c.346 0 .625.28.625.625v4.444c0 .346-.28.625-.625.625h-4.444a.625.625 0 1 1 0-1.25h3.82V5.625c0-.345.28-.625.624-.625Z",fill:"currentColor"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.791 6.99a6.042 6.042 0 0 0-6.041 6.042.625.625 0 1 1-1.25 0 7.292 7.292 0 0 1 7.292-7.291 7.292 7.292 0 0 1 4.861 1.863h.001l2.222 2a.625.625 0 1 1-.836.93l-2.221-2A6.042 6.042 0 0 0 9.79 6.991Z",fill:"currentColor"})),$=e=>a.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 49 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),a.createElement("path",{d:"M34.34 21.217 19.913 10.67a3.53 3.53 0 0 0-1.693-.647 3.677 3.677 0 0 0-1.82.258 3.223 3.223 0 0 0-1.382 1.084 2.718 2.718 0 0 0-.518 1.574v22.164c.002.557.182 1.102.518 1.573.337.47.816.845 1.382 1.083a3.678 3.678 0 0 0 1.818.259 3.53 3.53 0 0 0 1.693-.646l14.43-10.547c.464-.34.838-.767 1.096-1.25.257-.484.39-1.013.39-1.548 0-.535-.133-1.064-.39-1.548a3.714 3.714 0 0 0-1.097-1.25v-.012Z",fill:"currentColor"})),b=e=>a.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 49 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),a.createElement("path",{d:"M27.509 10h6.008v28.04H27.51V10ZM14.5 10h6.009v28.04H14.5V10Z",fill:"currentColor"})),C=e=>a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",viewBox:"0 0 40 40",fill:"none"},e),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.77 10.13c.457.22.748.682.748 1.19v18.477a1.32 1.32 0 0 1-2.145 1.03l-6.237-4.99H6.32A1.32 1.32 0 0 1 5 24.517V16.6c0-.729.59-1.32 1.32-1.32h4.816l6.237-4.99a1.32 1.32 0 0 1 1.397-.159Zm-1.892 3.936-4.455 3.563a1.32 1.32 0 0 1-.824.29h-3.96v5.279h3.96c.3 0 .59.102.824.29l4.455 3.563V14.066Z",fill:"currentColor"}),a.createElement("path",{d:"M34.969 15.666a1.32 1.32 0 0 1 0 1.866l-3.027 3.026 3.027 3.026a1.32 1.32 0 0 1-1.867 1.867l-3.026-3.026-3.026 3.026a1.32 1.32 0 0 1-1.867-1.867l3.027-3.026-3.027-3.026a1.32 1.32 0 1 1 1.867-1.866l3.026 3.026 3.026-3.026a1.32 1.32 0 0 1 1.867 0Z",fill:"currentColor"})),_=n(8248),k=e=>a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",viewBox:"0 0 20 20",fill:"none"},e),a.createElement("path",{d:"M14.784 5.192a.654.654 0 0 0-.926.925 5.888 5.888 0 0 1 0 8.325.654.654 0 1 0 .926.925 7.196 7.196 0 0 0 0-10.175Z",fill:"currentColor"}),a.createElement("path",{d:"M12.474 7.5a.654.654 0 1 0-.925.926 2.617 2.617 0 0 1 0 3.7.654.654 0 1 0 .925.925 3.925 3.925 0 0 0 0-5.55Z",fill:"currentColor"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.696 5.7a.654.654 0 0 0-1.063-.51L5.541 7.661H3.154a.654.654 0 0 0-.654.655v3.925c0 .36.293.654.654.654h2.387l3.092 2.473a.654.654 0 0 0 1.063-.51v-9.16ZM6.18 8.827l2.208-1.766v6.436L6.18 11.731a.654.654 0 0 0-.41-.143H3.809V8.97h1.963c.148 0 .293-.05.409-.144Z",fill:"currentColor"})),x=n(9687),A=n(3910),S=n(2256),P=n(5544),L=n(3947),T=n(6406),I=n(4877);function M(e){let{hlsStatsState:t,onClose:n}=e;var o,r,i;return a.createElement(l.so,{css:{position:"absolute",width:"$80",marginLeft:"$8",padding:"$8 $8 $10",zIndex:10,backgroundColor:"$surface_brighter",borderRadius:"$1"},direction:"column"},a.createElement(l.g,{css:{position:"absolute",top:"$2",right:"$2"},onClick:n},a.createElement(v.A,null)),a.createElement(F,{label:"URL"},a.createElement(l.so,{align:"center"},a.createElement("a",{style:{cursor:"pointer",textDecoration:"underline"},href:null==t?void 0:t.url,target:"_blank",rel:"noreferrer"},"Stream url"))),a.createElement(F,{label:"Video size"}," ".concat(null==(o=null==t?void 0:t.videoSize)?void 0:o.width,"x").concat(null==(r=null==t?void 0:t.videoSize)?void 0:r.height)),a.createElement(F,{label:"Buffer duration"},null==(i=null==t?void 0:t.bufferedDuration)?void 0:i.toFixed(2)," "),a.createElement(F,{label:"Connection speed"},"".concat(((null==t?void 0:t.bandwidthEstimate)/1e6).toFixed(2)," Mbps")),a.createElement(F,{label:"Bitrate"},"".concat(((null==t?void 0:t.bitrate)/1e6).toFixed(2)," Mbps")),a.createElement(F,{label:"distance from live"},function(e){let t=Math.floor(e);const n=Math.floor(t/3600);t-=3600*n;const l=Math.floor(t/60),a=Math.floor(t-60*l),o="".concat(l<10?"0"+l:l),r="".concat(a<10?"0"+a:a);let i="".concat(o,":").concat(r);if(n){const e="".concat(n<10?"0"+n:n);i="".concat(e,":").concat(o,":").concat(r)}return i}(t.distanceFromLive/1e3)),a.createElement(F,{label:"Dropped frames"},null==t?void 0:t.droppedFrames))}(0,l.a)(),(0,l.a)();var F=(0,a.memo)((e=>{let{label:t,children:n}=e;return a.createElement(l.so,{gap:4,justify:"center",css:{width:"100%"}},a.createElement(l.EY,{css:{width:"50%","@md":{fontSize:"$md"},"@sm":{fontSize:"$sm"}}},t),a.createElement(l.EY,{css:{"@md":{fontSize:"$md"},"@sm":{fontSize:"$sm"},width:"50%",overflowWrap:"break-word"}},n))}));(0,l.a)(),(0,l.a)();var R=(0,l.I4)(l.so,{justifyContent:"center",alignItems:"center",alignSelf:"stretch",width:"100%",gap:"$2"}),B=(0,l.I4)(l.so,{justifyContent:"flex-start",alignItems:"center",width:"100%",gap:"$4"}),D=(0,l.I4)(l.so,{justifyContent:"flex-end",alignItems:"center",width:"100%",gap:"$4"});(0,l.a)();var O=(0,a.forwardRef)(((e,t)=>{var n=e,{children:o}=n,r=(0,l.YG)(n,["children"]);const[i,s]=(0,a.useState)("auto");return(0,a.useEffect)((()=>{const e=()=>{const e=t.current;e&&e.videoWidth>e.videoHeight&&"100%"!==i&&s("100%")},n=t.current;if(n)return n.addEventListener("loadedmetadata",e),()=>{n.removeEventListener("loadedmetadata",e)}}),[]),a.createElement(l.so,(0,l.IA)({"data-testid":"hms-video",css:{size:"100%",position:"relative",justifyContent:"center",transition:"all 0.3s ease-in-out","@md":{"& video":{height:r.isFullScreen?"":"$60 !important"}},"& video::cue":{color:"#EFF0FA",whiteSpace:"pre-line",fontSize:"$sm",fontStyle:"normal",fontWeight:"$regular",lineHeight:"$sm",letterSpacing:"0.25px"},"& video::-webkit-media-text-track-display":{padding:"0 $4",boxShadow:"0px 1px 3px 0px #000000A3"},"& video::-webkit-media-text-track-container":{fontSize:"$space$10 !important"}},direction:"column"},r),a.createElement("video",{style:{margin:"0 auto",objectFit:"contain",width:i,height:"100%",maxWidth:"100%"},ref:t,playsInline:!0,disablePictureInPicture:!0}),o)}));(0,l.a)(),(0,l.a)(),(0,l.a)();var j=a.createContext({hlsPlayer:void 0}),z=()=>(0,a.useContext)(j),V=e=>{let{isPaused:t,width:n=20,height:o=20}=e;const{hlsPlayer:r}=z();return a.createElement(l.m_,{title:t?"Play":"Pause",side:"top"},a.createElement(l.K0,{onClick:e=>(0,l.BU)(void 0,null,(function*(){null==e||e.stopPropagation(),t?yield null==r?void 0:r.play():null==r||r.pause()})),"data-testid":"play_pause_btn"},t?a.createElement($,{width:n,height:o}):a.createElement(b,{width:n,height:o})))};(0,l.a)();var Y=e=>{let{title:t,onClick:n,children:o,css:r}=e;return a.createElement(l.m_,{title:t,side:"top"},a.createElement(l.K0,{onClick:n,"data-testid":"backward_forward_arrow_btn",css:r},o))};function W(e,t){return e/t*100}function H(e){let t=Math.floor(e);const n=Math.floor(t/3600);t-=3600*n;const l=Math.floor(t/60),a=Math.floor(t-60*l),o="".concat(l<10?"0".concat(l):l),r="".concat(a<10?"0".concat(a):a);let i="".concat(o,":").concat(r);if(n){const e="".concat(n<10?"0".concat(n):n);i="".concat(e,":").concat(o,":").concat(r)}return i}function U(e){return isFinite(e.duration)?e.duration:e.seekable.length>0?e.seekable.end(0):0}(0,l.a)(),(0,l.a)();(0,l.a)();(0,l.a)();var Z=e=>{let{volume:t,onClick:n}=e;return 0===t?a.createElement(C,{style:{cursor:"pointer",transition:"color 0.3s"},onClick:n}):t<50?a.createElement(_.A,{style:{cursor:"pointer",transition:"color 0.3s"},onClick:n}):a.createElement(k,{style:{cursor:"pointer",transition:"color 0.3s"},onClick:n})},N={Root:O,Progress:e=>{let{seekProgress:t,setSeekProgress:n}=e;const{hlsPlayer:o}=z(),[r,i]=(0,a.useState)(0),[s,c]=(0,a.useState)(0),u=null==o?void 0:o.getVideoElement(),d=(0,a.useCallback)((()=>{var e;if(!u)return;const t=U(u),n=Math.floor(W(u.currentTime,t));let l=0;u.buffered.length>0&&(l=Math.floor(W(null==(e=u.buffered)?void 0:e.end(0),t))),isNaN(n)||i(n),isNaN(l)||c(l)}),[u]),m=(0,a.useCallback)((()=>{u&&!t&&d()}),[t,d,u]);(0,a.useEffect)((()=>{if(u)return d(),u.addEventListener("timeupdate",m),function(){null==u||u.removeEventListener("timeupdate",m)}}),[d,m,u]);return u?a.createElement(l.so,{align:"center",css:{cursor:"pointer",h:"$2",alignSelf:"stretch"}},a.createElement(l.Ap,{id:"video-actual-rest",css:{cursor:"pointer",h:"$2",zIndex:1,transition:"all .2s ease .5s"},min:0,max:100,step:1,value:[r],showTooltip:!1,onValueChange:e=>{var t;const n=Math.floor(W(e[0],100)),l=null==o?void 0:o.getVideoElement();if(!l)return;const a=n*(isFinite(l.duration)?l.duration:(null==(t=l.seekable)?void 0:t.end(0))||0)/100;null==o||o.seekTo(a),d()},onPointerDown:()=>n(!0),onPointerUp:()=>n(!1),thumbStyles:{w:"$6",h:"$6"}}),a.createElement(l.az,{id:"video-buffer",css:{h:"$2",width:"".concat(s-r,"%"),background:"$on_surface_high",position:"absolute",left:"".concat(r,"%"),opacity:"25%"}})):null},Duration:()=>{const{hlsPlayer:e}=z(),[t,n]=(0,a.useState)(H(0)),o=(0,a.useCallback)((t=>{const l=null==e?void 0:e.getVideoElement();if(l){const e=U(l);n(H(e-t))}else n(H(t))}),[e]);return(0,a.useEffect)((()=>{const t=e=>{o(e)};if(e){e.on(u.f$.CURRENT_TIME,t);const n=null==e?void 0:e.getVideoElement();o(n.currentTime)}return function(){null==e||e.off(u.f$.CURRENT_TIME,t)}}),[e,o]),e?a.createElement(l.EY,{variant:"body1",css:{minWidth:"$16",c:"$on_surface_medium",display:"flex",justifyContent:"center",fontWeight:"$regular"}},"-",t):null},Volume:()=>{var e;const{hlsPlayer:t}=z(),[n,o]=(0,a.useState)(null!=(e=null==t?void 0:t.volume)?e:100),[r,i]=(0,a.useState)(!1);return a.createElement(l.so,{align:"center",css:{color:"$on_surface_high"},onMouseOver:e=>{e.stopPropagation(),i(!0)},onMouseLeave:e=>{e.stopPropagation(),i(!1)}},a.createElement(Z,{volume:n,onClick:()=>{n>0?(o(0),null==t||t.setVolume(0)):(o(100),null==t||t.setVolume(100))}}),a.createElement(l.Ap,{css:{mx:"$4",w:"$20",cursor:"pointer","@sm":{w:"$14"},"@xs":{w:"$14"},opacity:r?"1":"0",display:r?"":"none",transition:"all .2s ease .5s"},min:0,max:100,step:1,value:[n],onValueChange:e=>{null==t||t.setVolume(e[0]),o(e[0])},thumbStyles:{w:"$6",h:"$6"}}))},Controls:{Root:R,Left:B,Right:D},PlayPauseSeekControls:{Overlay:e=>{let{isPaused:t,showControls:n,hoverControlsVisible:r}=e;const i=(0,o.A)(l.$W.media.md),s=(0,l.pY)();return i||s?a.createElement(l.so,{align:"center",justify:"center",css:{position:"absolute",bg:"#00000066",display:"inline-flex",gap:"$2",zIndex:1,size:"100%",visibility:n?"":"hidden",opacity:n?"1":"0"}},a.createElement(Y,{title:"backward",css:{visibility:r.seekBackward?"":"hidden",opacity:r.seekBackward?"1":"0"}},a.createElement(w,{width:32,height:32})),a.createElement(l.az,{css:{bg:"rgba(0, 0, 0, 0.6)",r:"$round"}},a.createElement(V,{isPaused:t,width:48,height:48})),a.createElement(Y,{title:"forward",css:{visibility:r.seekForward?"":"hidden",opacity:r.seekForward?"1":"0"}},a.createElement(y,{width:32,height:32}))):a.createElement(a.Fragment,null,a.createElement(l.so,{css:{bg:"rgba(0, 0, 0, 0.6)",r:"$round",size:"$24",visibility:r.seekBackward?"":"hidden",opacity:r.seekBackward?"1":"0"},direction:"column",align:"center"},a.createElement(Y,{title:"backward"},a.createElement(w,{width:52,height:52})),a.createElement(l.EY,{variant:"body2",css:{fontWeight:"$regular"}},"10 secs")),a.createElement(l.az,{css:{bg:"rgba(0, 0, 0, 0.6)",r:"$round",visibility:r.pausePlay?"":"hidden",opacity:r.pausePlay?"1":"0"}},a.createElement(V,{isPaused:t,width:48,height:48})),a.createElement(l.so,{css:{bg:"rgba(0, 0, 0, 0.6)",r:"$round",size:"$24",visibility:r.seekForward?"":"hidden",opacity:r.seekForward?"1":"0"},direction:"column",align:"center"},a.createElement(Y,{title:"forward"},a.createElement(y,{width:52,height:52})),a.createElement(l.EY,{variant:"body2",css:{fontWeight:"$regular"}},"10 secs")))},Button:e=>{let{isPaused:t,onSeekTo:n}=e;return a.createElement(a.Fragment,null,a.createElement(Y,{onClick:e=>{e.stopPropagation(),n(-10)},title:"backward"},a.createElement(w,{width:20,height:20})),a.createElement(V,{isPaused:t}),a.createElement(Y,{onClick:e=>{e.stopPropagation(),n(10)},title:"forward"},a.createElement(y,{width:20,height:20})))}}};(0,l.a)();var G=e=>{let{isFullScreen:t,onToggle:n}=e;return a.createElement(l.m_,{title:"".concat(t?"Exit":"Go"," fullscreen"),side:"top"},a.createElement(l.K0,{css:{margin:"0px"},onClick:n,key:"fullscreen_btn","data-testid":"fullscreen_btn"},a.createElement(l.so,null,t?a.createElement(x.A,null):a.createElement(A.A,null))))};function K(e){let{open:t,unblockAutoPlay:n}=e;const r=(0,l.pY)();return((0,o.A)(l.$W.media.md)||r)&&t?a.createElement(l.K0,{css:{border:"1px solid white",bg:"white",color:"#000",r:"$2"},onClick:()=>(0,l.BU)(this,null,(function*(){return yield n()}))},a.createElement(k,{width:"32",height:"32"}),a.createElement(l.EY,{variant:"body1",css:{fontWeight:"$semiBold",px:"$2",color:"#000"}},"Tap To Unmute")):a.createElement(l.lG.Root,{open:t,onOpenChange:e=>(0,l.BU)(this,null,(function*(){e||(yield n())}))},a.createElement(l.Cf,{title:"Attention",closeable:!1},a.createElement(l.xL,null,a.createElement(l.EY,{variant:"md"},'The browser wants us to get a confirmation for playing the HLS Stream. Please click "play stream" to proceed.')),a.createElement(l.xL,{justify:"end"},a.createElement(l.$n,{variant:"primary",onClick:()=>(0,l.BU)(this,null,(function*(){yield n()}))},"Play stream"))))}function Q(e){let{isEnabled:t}=e;const{hlsPlayer:n}=z();return a.createElement(l.m_,{title:"Subtitles/closed captions",side:"top"},a.createElement(l.K0,{css:{p:"$2"},onClick:()=>null==n?void 0:n.toggleCaption()},t?a.createElement(S.A,{width:"20",height:"20px"}):a.createElement(P.A,{width:"20",height:"20px"})))}function q(e){let{open:t,onOpenChange:n,layers:r,onQualityChange:i,selection:s,isAuto:c,containerRef:u}=e;const d=(0,o.A)(l.$W.media.md),m=(0,l.pY)();return 0===r.length?null:d||m?a.createElement(l.cj.Root,{open:t,onOpenChange:n},a.createElement(l.cj.Trigger,{asChild:!0,"data-testid":"quality_selector"},a.createElement(l.so,{css:{color:"$on_primary_high",r:"$1",cursor:"pointer",p:"$2"}},a.createElement(L.A,null))),a.createElement(l.cj.Content,{container:u,css:{bg:"$surface_default",pb:"$1"},onClick:()=>n(!1)},a.createElement(l.cj.Title,{css:{display:"flex",color:"$on_surface_high",w:"100%",justifyContent:"space-between",mt:"$8",fontSize:"$md",px:"$10",pb:"$8",borderBottom:"1px solid $border_bright",alignItems:"center"}},"Quality",a.createElement(l.cj.Close,{css:{color:"$on_surface_high"},onClick:()=>n(!1)},a.createElement(v.A,null))),r.map((e=>a.createElement(l.so,{align:"center",css:{w:"100%",bg:"$surface_default","&:hover":{bg:"$surface_brighter"},cursor:"pointer",gap:"$4",py:"$8",px:"$10"},key:e.width,onClick:()=>i(e)},a.createElement(l.EY,{variant:"caption",css:{fontWeight:"$semiBold"}},J(e)),a.createElement(l.EY,{variant:"caption",css:{flex:"1 1 0",c:"$on_surface_low",pl:"$2"}},X(e)),!c&&e.width===(null==s?void 0:s.width)&&e.height===(null==s?void 0:s.height)&&a.createElement(T.A,{width:"16px",height:"16px"})))),a.createElement(l.so,{align:"center",css:{w:"100%",bg:"$surface_default","&:hover":{bg:"$surface_brighter"},cursor:"pointer",gap:"$4",py:"$8",px:"$10"},key:"auto",onClick:()=>i({height:"auto"})},a.createElement(l.EY,{variant:"caption",css:{fontWeight:"$semiBold",flex:"1 1 0"}},"Auto"),c&&a.createElement(T.A,{width:"16px",height:"16px"})))):a.createElement(l.ms.Root,{open:t,onOpenChange:e=>n(e),modal:!1},a.createElement(l.ms.Trigger,{asChild:!0,"data-testid":"quality_selector"},a.createElement(l.so,{css:{color:"$on_primary_high",r:"$1",cursor:"pointer",p:"$2"}},a.createElement(l.m_,{title:"Select Quality",side:"top"},a.createElement(l.so,{align:"center"},a.createElement(l.az,{css:{w:"$9",h:"$9",display:"inline-flex",alignItems:"center",c:"$on_surface_high"}},a.createElement(L.A,null)),a.createElement(l.EY,{variant:{"@md":"sm","@sm":"xs","@xs":"tiny"},css:{display:"flex",alignItems:"center",ml:"$2",c:"$on_surface_medium"}},c&&a.createElement(a.Fragment,null,"Auto",a.createElement(l.az,{css:{mx:"$2",w:"$2",h:"$2",background:"$on_surface_medium",r:"$1"}})),s&&Math.min(s.width||0,s.height||0),"p"))))),a.createElement(l.ms.Portal,{container:u},a.createElement(l.ms.Content,{sideOffset:5,align:"end",css:{height:"auto",maxHeight:"$52",w:"$40",bg:"$surface_bright",py:"$4",gap:"$4",display:"grid"}},r.map((e=>a.createElement(l.ms.Item,{onClick:()=>i(e),key:e.width,css:{bg:c||e.width!==(null==s?void 0:s.width)||e.height!==(null==s?void 0:s.height)?"$surface_bright":"$surface_default","&:hover":{bg:"$surface_brighter"},p:"$2 $4 $2 $8",h:"$12",gap:"$2"}},a.createElement(l.EY,{variant:"caption",css:{fontWeight:"$semiBold"}},J(e)),a.createElement(l.EY,{variant:"caption",css:{flex:"1 1 0",c:"$on_surface_low",pl:"$2"}},X(e)),!c&&e.width===(null==s?void 0:s.width)&&e.height===(null==s?void 0:s.height)&&a.createElement(T.A,{width:"16px",height:"16px"})))),a.createElement(l.ms.Item,{onClick:()=>i({height:"auto"}),key:"auto",css:{bg:c?"$surface_default":"$surface_bright","&:hover":{bg:"$surface_brighter"},p:"$2 $4 $2 $8",h:"$12",gap:"$2"}},a.createElement(l.EY,{variant:"caption",css:{fontWeight:"$semiBold",flex:"1 1 0"}},"Auto"),c&&a.createElement(T.A,{width:"16px",height:"16px"})))))}(0,l.a)(),(0,l.a)(),(0,l.a)();var J=e=>"".concat(Math.min(e.height||0,e.width||0),"p "),X=e=>"(".concat((Number(e.bitrate/1e3)/1e3).toFixed(2)," Mbps)");(0,l.a)();var ee,te=()=>{const{title:e,details:t,description:n}=(0,l.oB)(),o=(0,l.hI)(l.YL.ROOM_DETAILS);return(0,l.TF)(l.YL.ROOM_DETAILS)?a.createElement(l.so,{gap:"4",align:"center",justify:"between",css:{position:"relative",h:"fit-content",w:"100%",borderBottom:"1px solid $border_bright",p:"$8",backgroundColor:"$surface_dim"}},a.createElement(l.EY,{variant:"sub2",css:{fontWeight:"$semiBold"}},"About Session"),a.createElement(l.so,{onClick:o,css:{color:"$on_surface_high",cursor:"pointer","&:hover":{opacity:"0.8"}}},a.createElement(I.A,null))):a.createElement(l.so,{gap:"4",align:"center",css:{position:"relative",h:"fit-content",w:"100%",borderBottom:"1px solid $border_bright",p:"$8",backgroundColor:"$surface_dim"}},a.createElement(l.gu,null),a.createElement(l.so,{direction:"column"},e?a.createElement(l.EY,{variant:"sub2",css:{fontWeight:"$semiBold"}},e):null,a.createElement(l.so,null,a.createElement(l.U5,{details:t}),n?a.createElement(l.EY,{variant:"caption",css:{color:"$on_surface_medium"},onClick:o},"\xa0...more"):null)))},ne={},le=e=>{let{isFullScreen:t=!1}=e;const{elements:n}=(0,l.eI)(),r=(0,p.z7)((0,f.oz)(l.fj.sidePane)),i=(0,l.hI)(l.YL.CHAT),s=!!(null==n?void 0:n.chat),c=(0,o.A)(l.$W.media.md),u=(0,p.LM)();return(0,a.useEffect)((()=>{(0,h.YW)({sidepane:r,isMobile:c,showChat:s,isFullScreen:t}).with({isFullScreen:!0},(()=>{u.setAppData(l.fj.sidePane,"")})).with({isMobile:!0,showChat:!0,sidepane:h.P.when((e=>!e))},(()=>{i()})).with({showChat:!1,isMobile:!0,sidepane:l.YL.CHAT},(()=>{u.setAppData(l.fj.sidePane,"")})).otherwise((()=>{}))}),[r,c,i,s,u,t]),null},ae=()=>{var e,t,n,r,d,v,w;const y=(0,a.useRef)(null),$=(0,a.useRef)(),{elements:b}=(0,l.eI)(),C=(0,p.z7)(f.TI),_=(0,p.z7)((0,f.oz)(l.fj.hlsStats)),k=(0,p.Gw)(f.fP.POLL_STOPPED),x=(0,p.LM)(),{themeType:A}=(0,l.DP)(),[S,P]=(0,a.useState)(!1);let[L,T]=(0,a.useState)(null);const I=null==(e=C.variants[0])?void 0:e.url,[F,R]=(0,a.useState)([]),[B,D]=(0,a.useState)(!0),[O,z]=(0,a.useState)(!0),[V,Y]=(0,a.useState)(!1),[W,H]=(0,a.useState)(null),[U,Z]=(0,a.useState)(!1),[J,X]=(0,a.useState)({seekForward:!1,pausePlay:!1,seekBackward:!1}),[ae,oe]=(0,a.useState)(!1),[re,ie]=i(!1),se=(0,s.A)(I),ce=(0,p.sj)(),[ue,de]=(0,a.useState)(!0),[me,he]=(0,a.useState)(!0),[pe,fe]=(0,a.useState)(!1),Ee=(0,a.useRef)(null),ge=(0,a.useRef)(),[ve,we]=(0,a.useState)(!1),ye=m().isEnabled,$e=(0,l.hI)(l.YL.CHAT),be=!!(null==b?void 0:b.chat),Ce=(0,o.A)(l.$W.media.md),_e=(0,l.pY)(),ke=(0,c.A)($,re,{onClose:()=>ie(!1)}),[xe,Ae]=(0,a.useState)(!1);(0,a.useEffect)((()=>{const e=y.current,t=()=>Ae(!0),n=()=>Ae(!1);return null==e||e.addEventListener("playing",n),null==e||e.addEventListener("waiting",t),()=>{null==e||e.removeEventListener("playing",n),null==e||e.removeEventListener("waiting",t)}}),[]),(0,a.useEffect)((()=>{S&&se!==I&&P(!1)}),[I,S,se]),(0,a.useEffect)((()=>{if(!k)return;(null==ne?void 0:ne[k.data.id])&&(l.tx.removeToast(ne[k.data.id]),delete ne[k.data.id])}),[k]),(0,a.useEffect)((()=>{const e=y.current,t=()=>{P(!0),null==e||e.removeEventListener("ended",t)};return null==e||e.addEventListener("ended",t),()=>{null==e||e.removeEventListener("ended",t)}}),[I]);const Se=(0,a.useCallback)((e=>{var t;ee&&(he("auto"===(null==(t=e.height)?void 0:t.toString().toLowerCase())),null==ee||ee.setLayer(e))}),[F]);(0,a.useEffect)((()=>{let e=y.current;const t=e=>{let{layers:t}=e;R(t),Y(null==ee?void 0:ee.hasCaptions())},n=e=>{let{layer:t}=e;H(t)},o=e=>{var t,n=e,{payload:o}=n;const r=(0,l.YG)(n,["payload"]).duration,i=(e=>{try{return JSON.parse(e)}catch(t){return e}})(o);if(i.startsWith("poll:")){const e=i.substr(i.indexOf(":")+1),t=ce.getState((0,f.am)(e)),n=ce.getState((0,f.a$)(t.startedBy))||"Participant";if(!ne[e]){const o=l.tx.addToast({title:"".concat(n," started a ").concat(t.type,": ").concat(t.title),action:a.createElement(l.$n,{onClick:()=>{x.setAppData(l.fj.pollState,{[l.e1.pollInView]:e,[l.e1.view]:l.vD.VOTE}),x.setAppData(l.fj.sidePane,l.YL.POLLS)},variant:"standard",css:{backgroundColor:"$surface_bright",fontWeight:"$semiBold",color:"$on_surface_high",p:"$xs $md"}},"quiz"===t.type?"Answer":"Vote"),duration:1/0});ne[e]=o}}else switch(i.type){case l.oC:null==(t=window.showFlyingEmoji)||t.call(window,{emojiId:null==i?void 0:i.emojiId,senderId:null==i?void 0:i.senderId});break;default:{const e={title:"Payload from timed Metadata ".concat(i),duration:r||3e3};console.debug("Added toast ",JSON.stringify(e)),l.tx.addToast(e);break}}},r=e=>{console.error("[HLSView] error in hls","".concat(e))},i=e=>{let{isLive:t}=e;D(t)},s=e=>{oe(e.state===u.yw.paused),X((0,l.ko)((0,l.IA)({},J),{pausePlay:!0})),setTimeout((()=>{X((0,l.ko)((0,l.IA)({},J),{pausePlay:!1}))}),2e3)},c=e=>{z(e)},d=e=>Z(!!e);if(e&&I)return(ee=new u.dc(I,e)).on(u.f$.SEEK_POS_BEHIND_LIVE_EDGE,i),ee.on(u.f$.TIMED_METADATA_LOADED,o),ee.on(u.f$.ERROR,r),ee.on(u.f$.PLAYBACK_STATE,s),ee.on(u.f$.CAPTION_ENABLED,c),ee.on(u.f$.AUTOPLAY_BLOCKED,d),ee.on(u.f$.MANIFEST_LOADED,t),ee.on(u.f$.LAYER_UPDATED,n),()=>{ee.off(u.f$.SEEK_POS_BEHIND_LIVE_EDGE,i),ee.off(u.f$.ERROR,r),ee.off(u.f$.TIMED_METADATA_LOADED,o),ee.off(u.f$.PLAYBACK_STATE,s),ee.off(u.f$.CAPTION_ENABLED,c),ee.off(u.f$.AUTOPLAY_BLOCKED,d),ee.off(u.f$.MANIFEST_LOADED,t),ee.off(u.f$.LAYER_UPDATED,n),ee.reset()}}),[I,ce,x]),(0,a.useEffect)((()=>{const e=e=>T(e);return _?null==ee||ee.on(u.f$.STATS,e):null==ee||ee.off(u.f$.STATS,e),()=>{null==ee||ee.off(u.f$.STATS,e)}}),[_]);const Pe=()=>(0,l.BU)(void 0,null,(function*(){try{yield ee.play(),Z(!1)}catch(e){console.error("Tried to unblock Autoplay failed with",e.message)}}));(0,a.useEffect)((()=>(ue&&ke&&!pe&&ge.current&&clearTimeout(ge.current),!ke&&ge.current&&clearTimeout(ge.current),ge.current=setTimeout((()=>{ve||de(!1)}),5e3),()=>{ge.current&&clearTimeout(ge.current)})),[ue,ke,ve,pe]);const Le=(0,a.useCallback)((e=>{var t;(0,h.YW)({isLandscape:_e,isMobile:Ce,seek:e}).with({seek:-10,isMobile:!1,isLandscape:!1},(()=>{X((0,l.ko)((0,l.IA)({},J),{seekBackward:!0})),setTimeout((()=>{X((0,l.ko)((0,l.IA)({},J),{seekBackward:!1}))}),1e3)})).with({seek:10,isMobile:!1,isLandscape:!1},(()=>{X((0,l.ko)((0,l.IA)({},J),{seekForward:!0})),setTimeout((()=>{X((0,l.ko)((0,l.IA)({},J),{seekForward:!1}))}),1e3)})).otherwise((()=>null)),null==ee||ee.seekTo((null==(t=y.current)?void 0:t.currentTime)+e)}),[J,_e,Ce]),Te=(0,a.useCallback)((e=>{var t;if(!Ce&&!_e||(null==(t=null==C?void 0:C.variants[0])?void 0:t.playlist_type)!==f.ae.DVR)return;100*e.screenX/e.target.clientWidth<45?(X((0,l.ko)((0,l.IA)({},J),{seekBackward:!0})),Le(-10)):(X((0,l.ko)((0,l.IA)({},J),{seekForward:!0})),Le(10)),setTimeout((()=>{X((0,l.ko)((0,l.IA)({},J),{seekForward:!1,seekBackward:!1}))}),1e3)}),[null==C?void 0:C.variants,J,_e,Ce,Le]),Ie=(0,a.useCallback)((()=>(0,l.BU)(void 0,null,(function*(){var e;(0,h.YW)({isMobile:Ce,isLandscape:_e,playlist_type:null==(e=null==C?void 0:C.variants[0])?void 0:e.playlist_type}).with({playlist_type:f.ae.DVR,isMobile:!1,isLandscape:!1},(()=>(0,l.BU)(void 0,null,(function*(){ae?yield null==ee?void 0:ee.play():null==ee||ee.pause()})))).when((e=>{let{isMobile:t,isLandscape:n}=e;return t||n}),(()=>{de((e=>!e)),ge.current&&clearTimeout(ge.current)})).otherwise((()=>null))}))),[null==C?void 0:C.variants,_e,Ce,ae]),Me=(0,a.useCallback)((e=>{e.preventDefault(),Ce||_e||("mouseenter"===e.type||pe?de(!0):"mouseleave"!==e.type||ve?ue||"mousemove"!==e.type||(de(!0),ge.current&&clearTimeout(ge.current)):de(!1))}),[ue,_e,Ce,pe,ve]),Fe=(0,l.th)(ae,ee);return!I||S?a.createElement(a.Fragment,null,a.createElement(le,null),$.current&&(Ce||_e)&&a.createElement(l.az,{css:{position:"fixed",left:"$4",top:"$4",zIndex:11}},a.createElement(l.tr,{screenType:"hls_live_streaming",container:$.current})),a.createElement(l.so,{key:"hls-viewer",id:"hls-viewer-".concat(A),ref:$,direction:Ce||_e?"column":"row",justify:"center",css:{flex:_e?"2 1 0":"1 1 0"}},S?a.createElement(l.BG,{icon:a.createElement(E,{height:56,width:56}),title:"Stream has ended",subtitle:"Have a nice day!"}):a.createElement(l.BG,{icon:a.createElement(g.A,{height:56,width:56,style:{color:"white"}}),title:"Stream yet to start",subtitle:"Sit back and relax"}))):a.createElement(l.so,{key:"hls-viewer",id:"hls-viewer-".concat(A),ref:$,direction:Ce||_e?"column":"row",justify:"center",css:{flex:_e?"2 1 0":"1 1 0",transition:"all 0.3s ease-in-out"}},$.current&&(Ce||_e)&&a.createElement(l.az,{css:{position:"fixed",left:"$4",top:"$4",zIndex:11}},a.createElement(l.tr,{screenType:"hls_live_streaming",container:$.current})),a.createElement(j.Provider,{value:{hlsPlayer:ee}},(null==L?void 0:L.url)&&_&&!Ce&&!_e?a.createElement(M,{hlsStatsState:L,onClose:()=>{x.setAppData(l.fj.hlsStats,!_)}}):null,a.createElement(l.so,{id:"hls-player-container",align:"center",justify:"center",css:{size:"100%",margin:"0 auto","@md":{height:"auto"},outline:"none"},onKeyDown:e=>(0,l.BU)(void 0,null,(function*(){var t;(null==(t=null==C?void 0:C.variants[0])?void 0:t.playlist_type)===f.ae.DVR&&(yield Fe(e))})),tabIndex:"0"},!(Ce||_e)&&a.createElement(K,{open:U,unblockAutoPlay:Pe}),xe&&a.createElement(l.so,{align:"center",justify:"center",css:{position:"absolute"}},a.createElement(l.Rh,{width:72,height:72})),a.createElement(N.Root,{ref:y,onMouseEnter:Me,onMouseMove:Me,onMouseLeave:Me,onClick:Ie,isFullScreen:ke,onDoubleClick:e=>{Te(e)}},a.createElement(a.Fragment,null,!(Ce||_e)&&a.createElement(l.so,{align:"center",justify:"between",css:{position:"absolute",bg:"".concat(J.pausePlay||J.seekBackward||J.seekForward?"#00000066":""),display:"inline-flex",gap:"$2",zIndex:1,size:"100%"}},!xe&&(null==(t=null==C?void 0:C.variants[0])?void 0:t.playlist_type)===f.ae.DVR&&a.createElement(N.PlayPauseSeekControls.Overlay,{isPaused:ae,showControls:ue,hoverControlsVisible:J})),Ce||_e?a.createElement(a.Fragment,null,!xe&&(null==(n=null==C?void 0:C.variants[0])?void 0:n.playlist_type)===f.ae.DVR&&a.createElement(N.PlayPauseSeekControls.Overlay,{isPaused:ae,showControls:ue,hoverControlsVisible:J}),a.createElement(l.so,{ref:Ee,direction:"column",justify:"start",align:"start",css:{position:"absolute",top:"0",left:"0",width:"100%",flexShrink:0,zIndex:1,visibility:ue?"":"hidden",opacity:ue?"1":"0"}},a.createElement(N.Controls.Root,{css:{p:"$4 $8"},onClick:e=>e.stopPropagation()},a.createElement(N.Controls.Right,null,(_e||Ce&&ke)&&be&&a.createElement(l.xr,{onClick:()=>{ke&&ie(),setTimeout((()=>{$e()}),0)}}),V&&!U&&a.createElement(Q,{isEnabled:O}),$.current&&F.length>0&&!U?a.createElement(q,{layers:F,onOpenChange:fe,open:pe,selection:W,onQualityChange:Se,isAuto:me,containerRef:$.current}):null,a.createElement(K,{open:U,unblockAutoPlay:Pe}))))):null,ue&&a.createElement(l.so,{ref:Ee,direction:Ce?"columnReverse":"column",justify:"end",align:"start",css:{position:"absolute",bottom:ke&&(null==(r=null==C?void 0:C.variants[0])?void 0:r.playlist_type)===f.ae.DVR?"$8":"0",left:"0",zIndex:1,background:Ce||_e?"":"linear-gradient(180deg, ".concat(l.w4.colors.background_dim.value,"00 29.46%, ").concat(l.w4.colors.background_dim.value,"A3 100%);"),width:"100%",pt:"$8",flexShrink:0,transition:"visibility 0s 0.5s, opacity 0.5s linear"}},(null==(d=null==C?void 0:C.variants[0])?void 0:d.playlist_type)===f.ae.DVR?a.createElement(N.Progress,{seekProgress:ve,setSeekProgress:we}):null,a.createElement(N.Controls.Root,{css:{p:"$4 $8"},onClick:e=>e.stopPropagation()},a.createElement(N.Controls.Left,null,!(Ce||_e)&&a.createElement(a.Fragment,null,(null==(v=null==C?void 0:C.variants[0])?void 0:v.playlist_type)===f.ae.DVR?a.createElement(a.Fragment,null,a.createElement(N.PlayPauseSeekControls.Button,{isPaused:ae,onSeekTo:Le}),B?null:a.createElement(N.Duration,null)):null,a.createElement(N.Volume,null)),a.createElement(l.K0,{css:{px:"$2"},onClick:e=>(0,l.BU)(void 0,null,(function*(){e.stopPropagation(),yield null==ee?void 0:ee.seekToLivePosition(),D(!0)})),key:"jump-to-live_btn","data-testid":"jump-to-live_btn"},a.createElement(l.m_,{title:B?"Live":"Go to Live",side:"top"},a.createElement(l.so,{justify:"center",gap:2,align:"center"},a.createElement(l.az,{css:{height:"$4",width:"$4",background:B?"$alert_error_default":"$on_primary_medium",r:"$1"}}),a.createElement(l.EY,{variant:"$body1",css:{c:B?"$on_surface_high":"$on_surface_medium",fontWeight:"$semiBold"}},B?"LIVE":"GO LIVE")))),!Ce&&!_e||B||(null==(w=null==C?void 0:C.variants[0])?void 0:w.playlist_type)!==f.ae.DVR?null:a.createElement(N.Duration,null)),a.createElement(N.Controls.Right,null,V&&!(Ce||_e)&&a.createElement(Q,{isEnabled:O}),F.length>0&&!Ce&&!_e?a.createElement(q,{layers:F,onOpenChange:fe,open:pe,selection:W,onQualityChange:Se,isAuto:me,containerRef:$.current}):null,ye?a.createElement(G,{isFullScreen:ke,onToggle:ie}):null))))))),a.createElement(le,{isFullScreen:ke}),Ce&&!ke&&a.createElement(te,null))}}}]);
//# sourceMappingURL=179.8acd09a9.chunk.js.map